<!DOCTYPE html>
<html lang="en" data-bs_theme="dark" class="h-100">
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Cadastro</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='css/styles.css'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src='js/script.js'></script>
</head>

<body class="d-flex align-items-center py-4 bg-body-tertiary h-100">
  <main class="w-100 m-auto form-container">
    <form id="cadastro-form">
      <h1 class="h3 mb-6 fw-normal">Cadastrar</h1>
      <br>
      
      <div class="mb-3">
        <label for="nome" class="form-label">Nome</label>
        <input type="text" class="form-control" id="nome" placeholder="Digite seu nome" required>
      </div>
      
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" placeholder="email@gmail.com" required>
      </div>
      
      <div class="mb-3">
        <label for="cpf" class="form-label">CPF</label>
        <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00" required>
      </div>
      
      <div class="mb-3">
        <label for="senha" class="form-label">Senha</label>
        <input type="password" class="form-control" id="senha" placeholder="Digite sua senha" required>
      </div>

      <h1 class="h3 mb-6 fw-normal">Endereço Completo</h1>
      <br>
      
      <div class="mb-3">
        <label for="cep" class="form-label">CEP</label>
        <input type="text" class="form-control" id="cep" placeholder="01001-000" required>
      </div>
      
      <div class="mb-3">
        <label for="numero" class="form-label">Número</label>
        <input type="number" class="form-control" id="numero" placeholder="000" required>
      </div>
      
      <div class="mb-3">
        <label for="estado" class="form-label">Estado</label>
        <input type="text" class="form-control" id="estado" placeholder="Digite o estado" required>
      </div>
      
      <div class="mb-3">
        <label for="rua" class="form-label">Rua</label>
        <input type="text" class="form-control" id="rua" placeholder="Digite a rua" required>
      </div>
 <br><br>
      <button class="btn btn-primary w-10 py-2" type="submit">Cadastrar</button>
    </form>
  </main>

  <script>
    // Função de validação de CPF
    function validarCPF(cpf) {
        cpf = cpf.replace(/[^\d]+/g, ''); // Remove caracteres não numéricos

        if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
            return false; // CPF deve ter 11 dígitos e não pode ser todos iguais
        }

        let soma = 0;
        let resto;

        for (let i = 1; i <= 9; i++) {
            soma += parseInt(cpf.charAt(i - 1)) * (11 - i);
        }
        
        resto = (soma * 10) % 11;
        if (resto === 10 || resto === 11) {
            resto = 0;
        }
        if (resto !== parseInt(cpf.charAt(9))) {
            return false;
        }

        soma = 0;
        for (let i = 1; i <= 10; i++) {
            soma += parseInt(cpf.charAt(i - 1)) * (12 - i);
        }
        
        resto = (soma * 10) % 11;
        if (resto === 10 || resto === 11) {
            resto = 0;
        }
        if (resto !== parseInt(cpf.charAt(10))) {
            return false;
        }

        return true; // CPF válido
    }

    // Função de validação de Email
    function checarEmail() {
        const emailInput = document.getElementById('email').value;

        if (emailInput === "" || emailInput.indexOf('@') === -1 || emailInput.indexOf('.') === -1) {
            alert("Por favor, informar um e-mail válido");
            return false; // Email inválido
        } else {
            alert("Email informado: " + emailInput);
            return true; // Email válido
        }
    }

    // Evento de envio do formulário
    document.getElementById('cadastro-form').addEventListener('submit', function(event) {
        const cpfInput = document.getElementById('cpf').value;
        const emailValido = checarEmail(); // Chama a função de validação de email
        const cpfValido = validarCPF(cpfInput); // Chama a função de validação de CPF
        
        if (!emailValido || !cpfValido) {
            event.preventDefault(); // Evita o envio do formulário
            if (!cpfValido) {
                alert('CPF inválido. Por favor, insira um CPF válido.');
            }
        }
    });
  </script>
</body>
</html>